#! /usr/bin/python3

# Test speakers
# * sound server
#     * pipewire only
#
# * select device
#     * -L list devices
#     * -D device
#     * if not specified, use server default 
#
# * 

import os
import sys


channel_specs = {
    'front-left': (1, 'Front_Left.wav'),
    'front-centre': (2, 'Front_Center.wav'),
#    'front-center': (2, 'Front_Center.wav'),
    'front-right': (3, 'Front_Right.wav'),
    'side-right': (4, 'Side_Right.wav'),
    'rear-right': (5, 'Rear_Right.wav'),
    'rear-left': (6, 'Rear_Left.wav'),
    'side-left': (7, 'Side_Left.wav'),
    'rear-centre': (8, 'Rear_Center.wav'),
#    'lfe': (8, 'Rear_Center.wav'),
}


args = sys.argv
ch_names_req = args[1:] or channel_specs.keys()
ch_names = [ chn for chn in ch_names_req if chn in channel_specs.keys() ]

for ch_name in ch_names:
    ch_id, ch_wav_fn = channel_specs[ch_name]
    print(ch_name, ch_id, ch_wav_fn)

    cmd_params = [
        '/usr/bin/speaker-test',
        '-c8',
        '-p100000',
        '-t', 'wav',
        '-s{}'.format(ch_id),
        '-w', ch_wav_fn,
    ]
    
    os.system(' '.join(cmd_params))
